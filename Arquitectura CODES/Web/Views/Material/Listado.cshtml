@section scripts
{ <script type="text/javascript" src="~/js/codes/material/material-listado.js"></script> }

<!--Filtros-->

<v-row class="pb-0 mb-0">

    <v-col cols="2"></v-col>

    <v-col cols="8" class="pb-0 mb-0">

        <v-expansion-panels>

            <v-expansion-panel elevation="2" class="pb-0 text-subtitle-2" style="color: #4074a5;">
                
                <v-expansion-panel-header class="pb-0 pt-0">{{jsglobals.Filtros}}</v-expansion-panel-header>

                <v-expansion-panel-content>

                    <v-row dense class="mt-0 mb-0 pt-0 pb-0">

                        <v-col cols="12" md="4" class="pb-0 pt-0 mr-8">

                            <v-text-field v-model="filtros.nombre"
                                          :label="jsglobals.Nombre">
                            </v-text-field>

                        </v-col>

                        <v-col cols="12" md="7" class="pb-0 pt-0">
                            
                            <v-text-field v-model="filtros.descripcion"
                                          :label="jsglobals.Descripcion">
                            </v-text-field>

                        </v-col>

                        <v-col cols="12" md="4" class="pb-0 pt-0 mr-8">

                            <v-text-field v-model="filtros.multiplicadorToneladas"
                                          :label="jsglobals.MultiplicadorToneladas">
                            </v-text-field>

                        </v-col>

                        <v-col cols="12" md="6" dense class="pb-0 pt-0">

                            <v-radio-group row label="Estado: " v-model="filtros.activo">
                                <v-radio name="active" :label="jsglobals.Activo" value="true"></v-radio>
                                <v-radio name="active" :label="jsglobals.Inactivo" value="false"></v-radio>
                                <v-radio name="active" :label="jsglobals.Todos" value="0"></v-radio>
                            </v-radio-group>

                        </v-col>

                        <v-col cols="12" md="12" dense class="pb-0 pt-4">

                            <v-tooltip bottom>

                                <template v-slot:activator="{ on, attrs }">

                                    <v-btn class="float-right"
                                           v-on="on"
                                           @@click="loadGrid()"
                                           color="primary"
                                           small
                                           elevation="2">
                                        <v-icon small class="pr-1">mdi-magnify</v-icon>
                                        {{jsglobals.Buscar}}
                                    </v-btn>

                                </template>

                                <span>{{jsglobals.AplicarFiltros}}</span>

                            </v-tooltip>

                            <v-tooltip bottom>

                                <template v-slot:activator="{ on, attrs }">

                                    <v-btn class="float-right mr-3"
                                           v-bind="attrs"
                                           v-on="on"
                                           v-on:click="onClickLimpiarFiltros('todos')"
                                           color="primary"
                                           small
                                           elevation="2">
                                        <v-icon small class="pr-1">mdi-autorenew</v-icon>
                                        {{jsglobals.Limpiar}}
                                    </v-btn>

                                </template>

                                <span>{{jsglobals.LimpiarFiltros}}</span>

                            </v-tooltip>

                        </v-col>

                    </v-row>

                </v-expansion-panel-content>

            </v-expansion-panel>

        </v-expansion-panels>

    </v-col>

    <v-col cols="2"></v-col>

</v-row>

<!--Botones y Filter Chips-->

<v-row>

    <v-col cols="2"></v-col>

    <v-col cols="8">

        <v-chip v-if="filtros.nombre != '' "
                close
                class="ma-2 filterChip"
                @@click:close="onClickLimpiarFiltros('nombre')">
            {{jsglobals.Material}}: {{filtros.nombre}}
        </v-chip>

        <v-chip v-if="filtros.descripcion != '' "
                close
                class="ma-2 filterChip"
                @@click:close="onClickLimpiarFiltros('descripcion')">
            {{jsglobals.Descripcion}} : {{filtros.descripcion}}
        </v-chip>

        <v-chip v-if="filtros.multiplicadorToneladas!= '' "
                close
                class="ma-2 filterChip"
                @@click:close="onClickLimpiarFiltros('multiplicadorToneladas')">
            {{jsglobals.MultiplicadorToneladas}} : {{filtros.multiplicadorToneladas}}
        </v-chip>

        <v-chip v-if='filtros.activo == "true" '
                class="ma-2 filterChip"
                close
                @@click:close="onClickLimpiarFiltros('activo')">
            {{jsglobals.Estado}}: {{jsglobals.Activo}}
        </v-chip>

        <v-chip v-if='filtros.activo == "false" '
                class="ma-2 filterChip"
                close
                @@click:close="onClickLimpiarFiltros('activo')">
            {{jsglobals.Estado}}: {{jsglobals.Inactivo}}
        </v-chip>

        <v-tooltip top>

            <template v-slot:activator="{ on, attrs }">

                <v-btn class="float-right mr-3"
                       v-bind="attrs"
                       v-on="on"
                       v-on:click="onClickNuevo"
                       color="primary"
                       small
                       elevation="2">
                    <v-icon small class="pr-1">mdi-plus</v-icon>
                    {{jsglobals.Nuevo}} {{jsglobals.Material}}
                </v-btn>

            </template>

            <span>{{jsglobals.AgregarMaterial}}</span>

        </v-tooltip>

    </v-col>

    <v-col cols="2"></v-col>

</v-row>

<!--Grilla-->

<v-row class="pt-0">

    <v-col cols="2"></v-col>

    <v-col cols="8" class="mt-0">

        <v-data-table :headers="headers"
                      :items="gridData"
                      :items-per-page="10"
                      class="elevation-2"
                      item-key="idMaterial"
                      style="position: relative;"
                      :loading="loadingMateriales"
                      :loading-text=jsglobals.ObteniendoMateriales
                      :no-data-text=jsglobals.LabelNoCoincidences
                      :footer-props="{
                        'items-per-page-text':jsglobals.FilasPorPagina,
                        'items-per-page-all-text':jsglobals.Todas,
                        'items-per-page-options':[ 10,  25,  50,  -1],
                            pageText: '{0} - {1} de {2}'
                      }">

            <template v-slot:item.activo="{ item }">
                <v-icon v-if="item.activo" class="ma-2" color="blue lighten-2"> mdi-alpha-a-circle-outline</v-icon>
                <v-icon v-else class="ma-2" color="red lighten-2">mdi-alpha-i-circle-outline</v-icon>
            </template>

            <template v-slot:item.actions="{ item }">

                <v-tooltip left>

                    <template v-slot:activator="{ on, attrs }">
                        <v-icon v-on="on" v-bind="attrs" small class="mr-2" v-on:click="onClickEditar(item.idMaterial)" color="indigo">mdi-pencil</v-icon>
                    </template>

                    <span>{{jsglobals.Editar}}</span>

                </v-tooltip>

                <v-tooltip left>

                    <template v-slot:activator="{ on, attrs }" v-slot:item.activo="{ item }">
                        <v-icon v-if="!item.activo" v-on="on" disabled v-bind="attrs" small color="indigo">mdi-delete</v-icon>
                        <v-icon v-else v-on="on" v-bind="attrs" small v-on:click="onClickInactivar(item)" color="indigo">mdi-delete</v-icon>
                    </template>

                    <span>{{jsglobals.Inactivar}}</span>

                </v-tooltip>

            </template>

            <template v-slot:footer>

                <v-tooltip bottom>

                    <template v-slot:activator="{ on, attrs }">

                        <v-btn v-on:click="onClickExportar"
                               color="primary"
                               small
                               v-bind="attrs"
                               v-on="on"
                               elevation="2"
                               class="bkg-white margenMobile"
                               style="position: absolute; margin:15px">
                            <v-icon small class="pr-1">mdi-file-export</v-icon>
                            {{jsglobals.Exportar}}
                        </v-btn>

                    </template>

                    <span>{{jsglobals.ExportarExcel}}</span>

                </v-tooltip>

            </template>

        </v-data-table>

    </v-col>

    <v-col cols="2"></v-col>

</v-row>

<!--Popup-->

<v-row justify="space-around">

    <v-col cols="auto">

        <v-dialog v-model="dialog"
                  persistent
                  transition="dialog-bottom-transition"
                  width="500">

            <template v-slot:default="dialog">

                <v-card>
                    <v-card-title class="text-h6">{{jsglobals.Inactivar}}</v-card-title>
                    
                    <v-card-text class="text-center mb-5">{{jsglobals.MensajeMaterialInactivar}}</br>
                    {{jsglobals.Material}}: <strong>{{itemDelete.nombre}}</strong></v-card-text>

                    <v-divider></v-divider>

                    <v-card-actions>

                        <v-spacer></v-spacer>

                        <v-btn text
                               v-on:click="dialog.value = false"
                               color="primary">
                            {{jsglobals.No}}
                        </v-btn>

                        <v-btn text
                               v-on:click="onClickConfirmaBorrar(itemDelete.idMaterial)"
                               color="primary">
                            {{jsglobals.Si}}
                        </v-btn>

                    </v-card-actions>

                </v-card>

            </template>

        </v-dialog>

    </v-col>

</v-row>
